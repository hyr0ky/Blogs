## 反射

- [ ] [反射1](https://wx.zsxq.com/group/2212251881/topic/422128255425528)
- [ ] [反射2](https://wx.zsxq.com/group/2212251881/topic/844142852851442)
- [ ] [反射3](https://wx.zsxq.com/group/2212251881/topic/111885244285122)
- [ ] [Java反射与URLDNS链分析](https://drun1baby.top/2022/05/20/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80%E7%AF%87-02-Java%E5%8F%8D%E5%B0%84%E4%B8%8EURLDNS%E9%93%BE%E5%88%86%E6%9E%90/#0x03-Java-%E5%8F%8D%E5%B0%84%E7%BB%84%E6%88%90%E7%9B%B8%E5%85%B3%E7%9A%84%E7%B1%BB)
- [ ] [Java反射机制](https://wiki.spacex.mk/doc/6265/)

## 认识

>Java 的反射（reflection）机制是指在程序运行中，可以构造任意一个类的对象，可以了解任意一个对象所属的类，可以了解任意一个类的成员变量和方法，可以调用任意一个对象的属性和方法。 这种动态获取程序信息以及动态调用对象的功能称为 Java语言的反射机制 。

反射机制允许我们在 Java程序运行时检查，操作或者说获取任何类、接口、构造函数、方法和字段。还可以动态创建Java类实例、调用任意的类方法、修改任意的类成员变量值等操作。

- [反射的有什么用？](https://www.zhihu.com/question/377483107)
## 相关的类
- 反射机制相关操作一般位于java.lang.reflect包
- java反射机制组成需要重点注意以下的类：
```java
java.lang.Class：类对象;
java.lang.reflect.Constructor：类的构造器对象;
java.lang.reflect.Field：类的属性对象;
java.lang.reflect.Method：类的方法对象;
```

## 使用方法
```java
获取类的方法：forName
实例化类对象的方法：newInstance
获取函数的方法：getMethod
执行函数的方法：invoke
```



### 获取Class对象

- 根据类名：类名.class  `(需要导入类的包)`
- 根据对象：对象.getClass() `初始化对象后，其实不需要在使用反射了`
- 根据全限定类名：Class.forName(全路径类名) `需要知道类的完整全路径 常用方法`
- 通过类加载器获得Class对象：ClassLoader.getSystemClassLoader().loadClass("com.example.xxx");

```java
package org.example;  
  
public class GetClass {  
    public static void main(String[] args) throws ClassNotFoundException {  
        // 1. 通过类名.class  
        Class c1 = Person.class;  
          
        //2.通过对象的getClass方法  
        Person newPerson = new Person();  
        Class c2 = newPerson.getClass();  
  
        // 3.通过Class.forName()获得Class对象  
        Class c3 = Class.forName("org.example.Person");  
  
        // 4.通过类加载器获得Class对象  
        ClassLoader classLoader = ClassLoader.getSystemClassLoader();  
        Class c4 = classLoader.loadClass("org.example.Person");  
  
        System.out.println(c1);   
        System.out.println(c2);  
        System.out.println(c3);  
        System.out.println(c4);  
  
  
    }  
}
```
![](media/Pasted%20image%2020250903195038.png)

#### 补充
1. 获取数组类型的Class对象，需要使用Java类型的描述符方式
```java
Class<?> doubleArray = Class.forName("[D");//相当于 double[].class
Class<?> cStringArray = Class.forName("[[Ljava.lang.String;");// 相当于 String[][].class
```
2. 反射调用内部类的时候需要使用 `$` 来代替 `.`,如 `com.anbai.Test` 类有一个叫做 `Hello` 的内部类，那么调用的时候就应该将类名写成：`com.anbai.Test$Hello`。


### 获取成员变量

获取成员变量Field位于 `java.lang.reflect.Field` 包中
```java
Field[] getFields() ：获取所有 public 修饰的成员变量
Field[] getDeclaredFields() 获取所有的成员变量，不考虑修饰符
Field getField(String name) 获取指定名称的 public 修饰的成员变量
Field getDeclaredField(String name) 获取指定的成员变量
```

## 什么是jsp
JSP 全称 Java Server Page，基于 Java 语言，是一种动态网页技术。

它使用 JSP 标签在 HTML 网页中插入 Java 代码。标签通常以 `<% code %> `显示。

JSP 本质是简化版的 Servlet，JSP 在编译后就变成了 Servlet。JVM 只能识别 Java 的类，是无法识别 JSP代码的。所以 WEB 服务器会将 JSP 编译成 JVM 能识别的 Java类。

JSP 跟 Servlet 区别在于，JSP 常用于动态页面显示，Servlet 常用于逻辑控制。在代码中常使用 JSP 做前端动态页面，在接收到用户输入后交给对应的 Servlet 进行处理。当然 JSP 也可以当做后端代码进行逻辑控制。


## Jsp基础知识

1、JSP 文件后缀名为 *`.jsp`
2、JSP 代码需要写在指定的标签之中，比如：
```java
<%
out.println("Hello Jsp!");
%>
```

```jsp
<jsp:scriptlet>
代码片段
</jsp:scriptlet>
```


3. JSP 生命周期： `编译阶段 -> 初始化阶段 -> 执行阶段 -> 销毁阶段 `，此处多了一个`编译阶段`，是将 `JSP编译成 Servlet 的阶段`。而这个阶段也是有三个步骤的： `解析 JSP 文件 -> 将 JSP 文件转为 Servlet -> 编译 Servlet` 。
4. JSP 指令：是用来设置 JSP 整个页面属性的。格式为： `<%@ directive attribute="value" %>`。JSP 中的三种指令标签：

| 指令                   | 描述                            |
| -------------------- | ----------------------------- |
| `<%@ page ... %>`    | 定义网页依赖属性，比如脚本语言、error页面、缓存需求等 |
| `<%@ include ... %>` | 包含其他文件                        |
| `<%@ taglib ... %>`  | 引入标签库定义                       |

5. JSP的九大内置对象（隐式对象），这九个对象，可以不用声明直接使用。![](media/Pasted%20image%2020250126100230.png)  



## JSP程序运行

### 创建项目

1. 打开 IDEA 后，点击 Create New Project ，选择Mavan，勾选 Create from archetype ，选择的模板是 maven-archetype-webapp ，如下图所示：![](media/Pasted%20image%2020250126100558.png)  
2. 配置tomcat
3. 运行测试![](media/Pasted%20image%2020250126103628.png)

### Code

通过 JSP 模拟一下登录的过程。

首先引入一下依赖Jar包。点击左上角 File - Project Structure - Libraries ，点击 + 号，进入Tomcat 的 lib 文件夹下，将依赖全部引入（对于我们这样最省事），最后点击 OK。如下图所示：![](media/Pasted%20image%2020250126103933.png)
下面编写代码
1. 在webapp下面创建两个 JSP 文件，分别为 login.jsp 和 do_login.jsp ，如下图所示：![](media/Pasted%20image%2020250126104415.png)
2. 在`login.jsp`中输入下面代码![](media/Pasted%20image%2020250126105403.png)  
```java
<%@ page language="java" contentType="text/html; charset=utf-8"  
pageEncoding="utf-8"%>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">  
<title>User to Register Page!</title>  
</head>  
<body>  
<hr><br>登录页面<br>  
<form action="do_login.jsp" method="get">  
<br>  
<h1>Please input your message:</h1><br>  
Name:<input type="text" name="username"><br>  
Pswd:<input type="password" name="password"><br>  
<br><br><br>  
<input type="submit">&nbsp;&nbsp;&nbsp;&nbsp;<input type="reset"><br>  
</body>  
</html>
```

3. 在 do_login.jsp 键入以下代码
```java
<%--  
Created by IntelliJ IDEA.  
User: powerful  
Date: 2022/7/1  
Time: 9:35  
To change this template use File | Settings | File Templates.  
--%>  
<%@ page language="java" contentType="text/html; charset=utf-8"  
pageEncoding="utf-8"%>  
<%@ page import="java.sql.*" %>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">  
<title>Server to do the register page!</title>  
</head>  
<body>  
<%  
String username=request.getParameter("username");  
String password=request.getParameter("password");  
%>  
  
<%  
//模拟登录成功与否  
if(username.equals("admin") && password.equals("password")){  
response.getWriter().write("Success!");  
}else {  
response.getWriter().write("Error!");  
}  
%>  
</body>  
</html>
```


## Jsp木马
